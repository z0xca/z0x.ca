---
import Layout from "@/layouts/Layout.astro";
import WritingItem from "@/components/WritingItem.astro";
import { getCollection } from "astro:content";

// Get all writing posts and sort by date (newest first)
const writing = await getCollection("writing");
writing.sort(
	(a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
---

<Layout>
  <article>
    <span class="mb-5 block font-medium">Today</span>
    <p class="text-muted-foreground">I work as a design engineer at Linear. I like to build things for designers and developers, and think deeply about the user interface, how it looks, feels, behaves.</p>
    <p class="mt-4 text-muted-foreground">Previously, I worked on the design team at Vercel.</p>
  </article>

  <section>
    <div class="-mb-3 mt-16 sm:mt-32">
      <span class="mb-5 block font-medium sm:mb-4">Writing</span>
      <div class="flex flex-col gap-7 sm:gap-4">
        {writing.map((post) => (
          <WritingItem
            title={post.data.title}
            description={post.data.description}
            slug={post.slug}
          />
        ))}
      </div>
    </div>
  </section>
  <section class="mt-16 sm:mt-32">
    <span class="mb-5 block font-medium">More</span>
    <span class="text-muted-foreground">
      You can contact me on
      <a href="https://matrix.to/#/@z0x:z0x.ca" target="_blank" rel="nofollow noreferrer noopener" class="underline">Matrix</a>
      and find more of my code on
      <a href="https://git.z0x.ca" target="_blank" rel="nofollow noreferrer noopener" class="underline">Forgejo</a>
      and 
      <a href="https://github.com/z0xca" target="_blank" rel="nofollow noreferrer noopener" class="underline">GitHub</a>.
    </span>
  </section>
</Layout>